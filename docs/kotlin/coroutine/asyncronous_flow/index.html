<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<title data-react-helmet="true">Asynchronous Flow | COV</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://hscodev.github.io/docs/kotlin/coroutine/asyncronous_flow"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Asynchronous Flow | COV"><meta data-react-helmet="true" name="description" content="suspend í•¨ìˆ˜ëŠ” ë‹¨ì¼ ê°’ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤. flowëŠ” ê³„ì‚°ëœ ì—¬ëŸ¬ ê°’ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë°˜í™˜ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."><meta data-react-helmet="true" property="og:description" content="suspend í•¨ìˆ˜ëŠ” ë‹¨ì¼ ê°’ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤. flowëŠ” ê³„ì‚°ëœ ì—¬ëŸ¬ ê°’ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë°˜í™˜ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://hscodev.github.io/docs/kotlin/coroutine/asyncronous_flow"><link data-react-helmet="true" rel="alternate" href="https://hscodev.github.io/docs/kotlin/coroutine/asyncronous_flow" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://hscodev.github.io/docs/kotlin/coroutine/asyncronous_flow" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.4d477d3e.css">
<link rel="preload" href="/assets/js/runtime~main.4ca9dad8.js" as="script">
<link rel="preload" href="/assets/js/main.62572ae6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">COV</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/">Kotlin</a><a class="navbar__item navbar__link" href="/docs/etc/start_blog">ETC</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hscodev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ğŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ğŸŒ</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Index</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/kotlin/release/kotlin_1.6">Kotlin ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" href="/docs/kotlin/coroutine/coroutine_context_and_dispatchers">Coroutine</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/kotlin/coroutine/coroutine_context_and_dispatchers">Coroutine context and dispatchers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/kotlin/coroutine/asyncronous_flow">Asynchronous Flow</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_2rXS"><div class="docItemContainer_1EXp"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_Ftrd"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Asynchronous Flow</h1></header><p>suspend í•¨ìˆ˜ëŠ” ë‹¨ì¼ ê°’ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤. flowëŠ” ê³„ì‚°ëœ ì—¬ëŸ¬ ê°’ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë°˜í™˜ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="representing-multiple-values"><strong>Representing multiple values</strong><a aria-hidden="true" class="hash-link" href="#representing-multiple-values" title="Direct link to heading">â€‹</a></h2><p>ì½”ë“¤ë¦°ì—ì„œëŠ” Collectionìœ¼ë¡œ ì—¬ëŸ¬ ê°’ì„ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, <code>simple()</code> ì´ë¼ëŠ” í•¨ìˆ˜ì—ì„œ 3ê°œì˜ ìˆ«ìë¥¼ ê°€ì§„ Listë¥¼ ë°˜í™˜í•˜ê³  foreachë¥¼ ì‚¬ìš©í•˜ì—¬ ì¶œë ¥ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun simple(): List&lt;Int&gt; = listOf(1, 2, 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simple().forEach { value -&gt; println(value) } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="sequences"><strong>Sequences</strong><a aria-hidden="true" class="hash-link" href="#sequences" title="Direct link to heading">â€‹</a></h3><p>ë§Œì•½ CPU ë¸”ë¡œí‚¹ ì½”ë“œë¡œ ìˆ«ìë¥¼ ì—°ì‚°í•œë‹¤ë©´, <code>Sequence</code>ë¥¼ ì´ìš©í•´ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun simple(): Sequence&lt;Int&gt; = sequence { // sequence builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (i in 1..3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread.sleep(100) // pretend we are computing it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        yield(i) // yield next value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simple().forEach { value -&gt; println(value) } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="suspending-functions"><strong>Suspending functions</strong><a aria-hidden="true" class="hash-link" href="#suspending-functions" title="Direct link to heading">â€‹</a></h3><p>ìœ„ì˜ ì˜ˆì œë“¤ì€ ë©”ì¸ ìŠ¤ë ˆë“œë¥¼ ì°¨ë‹¨í•©ë‹ˆë‹¤. suspendë¥¼ ì‚¬ìš©í•˜ì—¬ í•¨ìˆ˜ë¥¼ ë¹„ë™ê¸° ì½”ë“œë¡œ ë³€í™˜ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">suspend fun simple(): List&lt;Int&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    delay(1000) // pretend we are doing something asynchronous here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return listOf(1, 2, 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simple().forEach { value -&gt; println(value) } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="flows"><strong>Flows</strong><a aria-hidden="true" class="hash-link" href="#flows" title="Direct link to heading">â€‹</a></h3><p><code>List&lt;Int&gt;</code>ë¥¼ ë¦¬í„´ íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´, ëª¨ë“  ê°’ì„ í•œë²ˆì— ë°˜í™˜í•  ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤.  <code>Sequence&lt;Int&gt;</code>ì˜ ë¹„ë™ê¸° í˜•íƒœì¸ ë¹„ë™ê¸° ìŠ¤íŠ¸ë¦¼ <code>Flow&lt;Int&gt;</code> ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Launch a concurrent coroutine to check if the main thread is blocked</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    launch {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (k in 1..3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            println(&quot;I&#x27;m not blocked $k&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            delay(100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FlowPractice().simple().collect { value -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class FlowPractice {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fun simple(): Flow&lt;Int&gt; = flow { // flow builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (i in 1..3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            delay(100) // pretend we are doing something useful here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            emit(i) // emit next value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">I&#x27;m not blocked 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I&#x27;m not blocked 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I&#x27;m not blocked 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Flowì™€ ë‹¤ë¥¸ ì˜ˆì œì˜ ì°¨ì´ì </p><ul><li>Flowë¥¼ ë§Œë“œëŠ” ë¹Œë” í•¨ìˆ˜ëŠ” <code>flow</code>ì´ë‹¤.</li><li><code>flow { ... }</code> ë¹Œë”ë¸”ë¡ ë‚´ë¶€ ì½”ë“œëŠ” <code>suspend</code> í•  ìˆ˜ ìˆë‹¤.</li><li>flowë¥¼ ë¦¬í„´í•˜ëŠ” simple í•¨ìˆ˜ ìì²´ëŠ” suspendë¥¼ í‘œì‹œí•  í•„ìš”ëŠ” ì—†ë‹¤.</li><li>flowì—ì„œ ê°’ì„ ì „ë‹¬í•  ë•ŒëŠ” <code>emit</code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.</li><li>flowì—ì„œ ê°’ì„ ìˆ˜ì§‘í•  ë•ŒëŠ” <code>collect</code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.</li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>flow ì˜ˆì œì—ì„œ delay ëŒ€ì‹ ì— Thread.sleepì„ ì‚¬ìš©í•˜ë©´ ë©”ì¸ ì“°ë ˆë“œê°€ ì¤‘ë‹¨ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="flow-are-cold"><strong>Flow are cold</strong><a aria-hidden="true" class="hash-link" href="#flow-are-cold" title="Direct link to heading">â€‹</a></h2><p>FlowëŠ” sequencesì™€ ê°™ì´ cold stream ì…ë‹ˆë‹¤. ì•„ë˜ ì½”ë“œì—ì„œ flow builderëŠ” collect í•˜ê¸°ì „ê¹Œì§€ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun simple(): Flow&lt;Int&gt; = flow { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println(&quot;Flow started&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (i in 1..3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        delay(100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit(i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println(&quot;Calling simple function...&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val flow = simple()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println(&quot;Calling collect...&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flow.collect { value -&gt; println(value) } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println(&quot;Calling collect again...&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flow.collect { value -&gt; println(value) } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Calling simple function...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Calling collect...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Flow started</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Calling collect again...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Flow started</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ì¤‘ìš”í•œ í•œê°€ì§€ ì•„ìœ ëŠ” flowë¥¼ ë°˜í™˜í•˜ëŠ” <code>simple</code> í•¨ìˆ˜ê°€ <code>suspend</code> í•¨ìˆ˜ê°€ ì•„ë‹™ë‹ˆë‹¤. simple í•¨ìˆ˜ì˜ ìˆ˜í–‰ì€ ë¹ ë¥´ê²Œ ë°˜í™˜í•˜ê³  ì•„ë¬´ê²ƒë„ ê¸°ë‹¤ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤. flowëŠ” í•­ìƒ <code>collect</code>ë¥¼ í˜¸ì¶œ í•  ë•Œë§ˆë‹¤ ì‹œì‘í•˜ê³ , ì¬ í˜¸ì¶œí•˜ëŠ” ê²½ìš°ì—ë„ ë‹¤ì‹œ ì‹œì‘ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="flow-cancellation-basics"><strong>Flow cancellation basics</strong><a aria-hidden="true" class="hash-link" href="#flow-cancellation-basics" title="Direct link to heading">â€‹</a></h2><p>FlowëŠ” ì½”ë£¨í‹´ì˜ ì¼ë°˜ì ì¸ cooperative cancellationì„ ë”°ë¦…ë‹ˆë‹¤. í‰ì†Œì²˜ëŸ¼ flowê°€ ì¤‘ë‹¨ë˜ë©´ flowì˜ ë‚´ë¶€ì˜ delayê°™ì€ suspend í•¨ìˆ˜ ì—­ì‹œ ì·¨ì†Œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì˜ˆì œì—ì„œ <code>withTimeoutOrNull</code>ë¥¼ í™œìš©í•œ ì¤‘ë‹¨í•˜ëŠ” ë°©ë²•ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun simple(): Flow&lt;Int&gt; = flow { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (i in 1..3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        delay(100)          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;Emitting $i&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit(i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    withTimeoutOrNull(250) { // Timeout after 250ms </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        simple().collect { value -&gt; println(value) } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println(&quot;Done&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Emitting 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Emitting 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Done</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="flow-builders"><strong>Flow builders</strong><a aria-hidden="true" class="hash-link" href="#flow-builders" title="Direct link to heading">â€‹</a></h2><p>flow { ... }ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ê²ƒ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. flowë¥¼ ë” ì‰½ê²Œ ì„ ì–¸ í•  ìˆ˜ ìˆëŠ” ë‹¤ë¥¸ ë¹Œë”ë„ ìˆìŠµë‹ˆë‹¤.</p><ul><li><code>flowOf</code> ë¹Œë”ëŠ” ê³ ì •ëœ ê°’ì˜ setë¥¼ ë°˜í™˜í•˜ëŠ” flowë¥¼ ë§Œë“­ë‹ˆë‹¤.</li><li><code>.asFlow()</code> í™•ì¥ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ì–‘í•œ ì»¬ë ‰ì…˜ ë° ì‹œí€€ìŠ¤ë¥¼ flowìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li></ul><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">flowOf(1, 2, 3).collect { value -&gt; println(value) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Convert an integer range to a flow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1..3).asFlow().collect { value -&gt; println(value) }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="intermediate-flow-operators"><strong>Intermediate flow operators</strong><a aria-hidden="true" class="hash-link" href="#intermediate-flow-operators" title="Direct link to heading">â€‹</a></h2><p>FlowëŠ” Collectionê³¼ Sequencesì²˜ëŸ¼ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì—¬ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¤‘ê°„ ì—°ì‚°ìëŠ” ì—…ìŠ¤íŠ¸ë¦¼ flowì— ì ìš©ë˜ê³  ë‹¤ìš´ìŠ¤íŠ¸ë¦¼ flowë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.  ì—°ì‚°ì ì—­ì‹œ flowì²˜ëŸ¼ coldí•˜ì—¬ ë³€í™˜ë§Œìœ¼ë¡œëŠ” ì‹¤í–‰ì‹œí‚¤ì§€ ì•ŠìŠµë‹ˆë‹¤. ì—°ì‚°ìëŠ” ì¤‘ë‹¨ í•¨ìˆ˜ë¡œ ì„ ì–¸ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ë³€í™˜ëœ flowë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ë¹ ë¥´ê²Œ ë™ì‘í•©ë‹ˆë‹¤.</p><p>ê¸°ë³¸ì ìœ¼ë¡œ ì¹œìˆ™í•œ ì—°ì‚°ìëŠ” <code>map</code>ê³¼ <code>filter</code>ê°€ ìˆìŠµë‹ˆë‹¤. ì‹œí€€ìŠ¤ì™€ì˜ ì¤‘ìš”í•œ ì°¨ì´ì ì€ ì—°ì‚°ì ë¸”ë¡ ë‚´ë¶€ì—ì„œ ì¤‘ë‹¨í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ì˜ˆë¥¼ ë“¤ì–´ ì¥ê¸° ìˆ˜í–‰í•˜ëŠ” suspend í•¨ìˆ˜ê°€ ìˆì„ ë•Œ flowì— map ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ê³¼ì— ë§¤í•‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">suspend fun performRequest(request: Int): String {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    delay(1000) // imitate long-running asynchronous work</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &quot;response $request&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (1..3).asFlow() // a flow of requests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .map { request -&gt; performRequest(request) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .collect { response -&gt; println(response) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">response 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response 3</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="transform-operator"><strong>Transform operator</strong><a aria-hidden="true" class="hash-link" href="#transform-operator" title="Direct link to heading">â€‹</a></h2><p>Flow ë³€í™˜ ì—°ì‚°ì ê°€ìš´ë° ê°€ì¥ ì¼ë°˜ì ì¸ ê²ƒ ì¤‘ í•˜ë‚˜ëŠ” <code>tranform</code>ì…ë‹ˆë‹¤. ì´ê²ƒì€ mapê³¼ filterì²˜ëŸ¼ ì‰½ê²Œ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ë³´ë‹¤ ë³µì¡í•œ ë³€í™˜ì„ êµ¬í˜„í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ì˜ˆë¥¼ ë“¤ì–´ <code>transform</code>ì„ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸°ì„± ì¥ê¸° ë¡œì§ì„ ì‹œì‘í•˜ê¸° ì „ì— ë¬¸ìì—´ì„ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"> (1..3).asFlow() // a flow of requests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .transform { request -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit(&quot;Making request $request&quot;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit(performRequest(request)) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .collect { response -&gt; println(response) }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Making request 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Making request 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Making request 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response 3</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="size-limiting-operators"><strong>Size-limiting operators</strong><a aria-hidden="true" class="hash-link" href="#size-limiting-operators" title="Direct link to heading">â€‹</a></h2><p>takeì™€ ê°™ì€ í¬ê¸° ì œí•œ ì¤‘ê°„ ì—°ì‚°ìëŠ” ì œí•œëœ í¬ê¸°ì— ë„ë‹¬í•˜ë©´ flowì˜ ì‹¤í–‰ì„ ì·¨ì†Œí•©ë‹ˆë‹¤. ì½”ë£¨í‹´ì˜ ì·¨ì†ŒëŠ” í•­ìƒ Exceptionì„ ë°œìƒí•©ë‹ˆë‹¤. ê·¸ë˜ì„œ try-catchì™€ ê°™ì€ ìì› ê´€ë¦¬ í•¨ìˆ˜ê°€ ë™ì‘ë©ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"> fun numbers(): Flow&lt;Int&gt; = flow {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {                          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit(2) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;This line will not execute&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit(3)    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } finally {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;Finally in numbers&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    numbers() </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .take(2) // take only the first two</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .collect { value -&gt; println(value) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Finally in numbers</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="terminal-flow-operators"><strong>Terminal flow operators</strong><a aria-hidden="true" class="hash-link" href="#terminal-flow-operators" title="Direct link to heading">â€‹</a></h2><p>flowì˜ ë‹¨ë§ ì—°ì‚°ìëŠ” collectionì„ ì¤‘ë‹¨ í•¨ìˆ˜ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤. collect ì—°ì‚°ìëŠ” ê°€ì¥ ê¸°ì´ˆì ì¸ ê²ƒ ì¤‘ í•˜ë‚˜ì§€ë§Œ, ë” ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë‹¨ë§ ì—°ì‚°ìë„ ìˆìŠµë‹ˆë‹¤.</p><ul><li>toListì™€ toSetì„ ì´ìš©í•´ ë‹¤ì–‘í•œ ì»¬ë ‰ì…˜ìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li><li>first ì—°ì‚°ìëŠ” í•œ ë²ˆë§Œ ì „ë‹¬ ë°›ì„ ìˆ˜ ìˆê²Œ ë³´ì¥í•©ë‹ˆë‹¤.</li><li>reduceì™€ foldë¥¼ ì´ìš©í•˜ì—¬ í•˜ë‚˜ì˜ ê°’ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li></ul><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val sum = (1..5).asFlow()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .map { it * it } // squares of numbers from 1 to 5                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reduce { a, b -&gt; a + b } // sum them (terminal operator)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println(sum)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">55</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="flows-are-sequential"><strong>Flows are sequential</strong><a aria-hidden="true" class="hash-link" href="#flows-are-sequential" title="Direct link to heading">â€‹</a></h2><p>ê°ê°ì˜ flow ì»¬ë ‰ì…˜ì€ ë‹¤ì¤‘ flowì—ì„œ ì‚¬ìš©ë˜ëŠ” íŠ¹ìˆ˜í•œ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í•œ ìˆœì°¨ì ìœ¼ë¡œ ë°œìƒí•©ë‹ˆë‹¤. ì»¬ë ‰ì…˜ì€ ë‹¨ë§ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë£¨í‹´ì—ì„œ ì§ì ‘ ë™ì‘í•©ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ìƒˆë¡œìš´ ì½”ë£¨í‹´ìœ¼ë¡œ ë™ì‘í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ê° ê°’ì˜ ì „ë‹¬ì€ ì—…ìŠ¤íŠ¸ë¦¼ì—ì„œ ë‹¤ìš´ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ëª¨ë“  ì¤‘ê°„ ì—°ì‚°ìì— ì˜í•´ ì²˜ë¦¬ëœ ë‹¤ìŒ í„°ë¯¸ë„ ì—°ì‚°ìì— ì „ë‹¬ë©ë‹ˆë‹¤.</p><p>ë‹¤ìŒ ì˜ˆì œëŠ” ì§ìˆ˜ë¥¼ filterí•˜ì—¬ mapì„ ì´ìš©í•´ Stringìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">(1..5).asFlow()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .filter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;Filter $it&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        it % 2 == 0              </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }              </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .map { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;Map $it&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;string $it&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }.collect { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;Collect $it&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Filter 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filter 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Map 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Collect string 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filter 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filter 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Map 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Collect string 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filter 5</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="flow-context"><strong>Flow context</strong><a aria-hidden="true" class="hash-link" href="#flow-context" title="Direct link to heading">â€‹</a></h2><p>flowì˜ collectionì€ í•­ìƒ coroutineì˜ context ì•ˆì—ì„œ ë°œìƒí•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ simple flowê°€ ìˆì„ ë•Œ,</p><p>ë‹¤ìŒ ì½”ë“œëŠ” flowì— êµ¬í˜„í•œ ì„¸ë¶€ ì‚¬í•­ì— ìƒê´€ ì—†ì´ ì‘ì„±ìê°€ ëª…ì‹œí•œ context ì•ˆì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">withContext(context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simple().collect { value -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(value) // run in the specified context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ì´ flowì˜ ì†ì„±ì€ ìœ ì§€ëœ contextì— ì˜í•´ í˜¸ì¶œë©ë‹ˆë‹¤.</p><p>ê·¸ë˜ì„œ ê¸°ë³¸ì ìœ¼ë¡œ <code>flow { ... }</code> ë¹Œë”ì˜ ë‚´ë¶€ ì½”ë“œëŠ” flowì˜ collectorê°€ ì œê³µí•˜ëŠ” context ì•ˆì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì•„ë˜ simple í•¨ìˆ˜ì—ì„œ í˜¸ì¶œí•˜ê±°ë‚˜ ì „ë‹¬í•˜ëŠ” êµ¬í˜„ì€ ì“°ë ˆë“œë¥¼ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun simple(): Flow&lt;Int&gt; = flow {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log(&quot;Started simple flow&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (i in 1..3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit(i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simple().collect { value -&gt; log(&quot;Collected $value&quot;) } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] Started simple flow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] Collected 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] Collected 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] Collected 3</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>simple().collect</code>ëŠ” ë©”ì¸ ì“°ë ˆë“œì—ì„œ í˜¸ì¶œë˜ì—ˆê³ , flow builderì˜ ë‚´ë¶€ êµ¬í˜„ë„ ë©”ì¸ ì“°ë ˆë“œì—ì„œ ë™ì‘í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ê²ƒì€ ë¹ ë¥´ê²Œ ì‹¤í–‰í•˜ê±°ë‚˜ ë¹„ë™ê¸° ì½”ë“œì— ëŒ€í•œ ê¸°ì´ˆì´ë©°, ì‹¤í–‰ contextì™€ í˜¸ì¶œìì˜ ì°¨ë‹¨ì„ ì‹ ê²½ì“°ì§€ ì•ŠìŠµë‹ˆë‹¤.</p><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="wrong-emission-withcontext"><strong>Wrong emission withContext</strong><a aria-hidden="true" class="hash-link" href="#wrong-emission-withcontext" title="Direct link to heading">â€‹</a></h3><p>ì¥ê¸° ì‹¤í–‰í•˜ì—¬ CPUë¥¼ ì†Œëª¨í•˜ëŠ” ì½”ë“œëŠ” Dispatchers.Defaultì˜ context ì‚¬ìš©ì´ í•„ìš”í•˜ê³ , UIë¥¼ ê°±ì‹ í•˜ëŠ” ì½”ë“œëŠ” Dispatchers.Mainì˜ contextë¥¼ ì‚¬ìš©í•´ì•¼ í•  í•„ìš”ê°€ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ withContextëŠ” coroutineì—ì„œ contextë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ”ë°, <code>flow { ... }</code> ë¹Œë”ì˜ ë‚´ë¶€ ì½”ë“œëŠ” context ì†ì„±ì„ ìœ ì§€ê²Œë˜ê³  ë‹¤ë¥¸ contextì—ì„œ emitì˜ í˜¸ì¶œì€ í—ˆìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"> fun simple(): Flow&lt;Int&gt; = flow {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The WRONG way to change context for CPU-consuming code in flow builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kotlinx.coroutines.withContext(Dispatchers.Default) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (i in 1..3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(100) // pretend we are computing it in CPU-consuming way</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            emit(i) // emit next value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simple().collect { value -&gt; println(value) } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Exception in thread &quot;main&quot; java.lang.IllegalStateException: Flow invariant is violated:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Flow was collected in [CoroutineId(1), &quot;coroutine#1&quot;:BlockingCoroutine{Active}@5511c7f8, BlockingEventLoop@2eac3323],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        but emission happened in [CoroutineId(1), &quot;coroutine#1&quot;:DispatchedCoroutine{Active}@2dae0000, Dispatchers.Default].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Please refer to &#x27;flow&#x27; documentation or use &#x27;flowOn&#x27; instead</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at ...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="flowon-operator"><strong>flowOn operator</strong><a aria-hidden="true" class="hash-link" href="#flowon-operator" title="Direct link to heading">â€‹</a></h3><p>ì˜ˆì™¸ì ìœ¼ë¡œ flowOn í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ flowë¥¼ ì „ë‹¬í•˜ëŠ”ë° ì‚¬ìš©í•˜ëŠ” contextë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì˜ ì½”ë“œì—ì„œ flowì˜ context ë³€ê²½ì˜ ì˜¬ë°”ë¥¸ ì½”ë“œë¥¼ ë³¼ ìˆ˜ ìˆê³ , ì“°ë ˆë“œê°€ ì–´ë–»ê²Œ ë³€í™”í•˜ëŠ”ì§€ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun simple(): Flow&lt;Int&gt; = flow {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (i in 1..3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread.sleep(100) // pretend we are computing it in CPU-consuming way</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log(&quot;Emitting $i&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit(i) // emit next value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}.flowOn(Dispatchers.Default) // RIGHT way to change context for CPU-consuming code in flow builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simple().collect { value -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log(&quot;Collected $value&quot;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[DefaultDispatcher-worker-1 @coroutine#2] Emitting 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[DefaultDispatcher-worker-1 @coroutine#2] Emitting 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[DefaultDispatcher-worker-1 @coroutine#2] Emitting 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] 3</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ì´ ê²°ê³¼ì—ì„œ <code>flow{ ... }</code> ë¸”ë¡ì€ ë°±ê·¸ë¼ìš´ë“œ ì“°ë ˆë“œì—ì„œ ë™ì‘í•˜ê³  collectionì€ ë©”ì¸ ì“°ë ˆë“œì—ì„œ ë™ì‘ í•œê²ƒì„ ì£¼ëª©í•˜ì„¸ìš”.</p><p>ë˜ë‹¤ë¥¸ ì£¼ëª©í• ë§Œí•œ ì ì€ flowOn ì—°ì‚°ìëŠ” flowì˜ ê¸°ë³¸ì ì¸ ìˆœì„œëŒ€ë¡œ ì „í™˜ëœ ê²ƒì…ë‹ˆë‹¤. collectionì€ coroutine#1ì—ì„œ ë°œìƒí•˜ê³ , ì „ë‹¬ì€ coroutine#2ë¡œ ë°œìƒí•˜ëŠ” ë™ì‹œì— ê°ê° ë‹¤ë¥¸ ì“°ë ˆë“œì—ì„œ ë™ì‘í•˜ì˜€ìŠµë‹ˆë‹¤. flowOn ì—°ì‚°ìëŠ” CoroutineDispatcherì˜ ë³€ê²½ì´ ìˆì„ ë•Œ, upstream flowì— ëŒ€í•œ ë˜ë‹¤ë¥¸ ì½”ë£¨í‹´ì„ ìƒì„±í•©ë‹ˆë‹¤.</p><p>flowOnì´ë”ë¼ë„ ê°™ì€ Dispatchersì¸ ê²½ìš° ë‹¤ë¥¸ ì½”ë£¨í‹´ì„ ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    withContext(Dispatchers.Default){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FlowPractice().simple().collect { value -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log(value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class FlowPractice {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fun simple(): Flow&lt;Int&gt; = flow {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (i in 1..3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(100) // pretend we are computing it in CPU-consuming way</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log(&quot;Emitting $i&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            emit(i) // emit next value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }.flowOn(Dispatchers.Default) // RIGHT way to change context for CPU-consuming code in flow builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[DefaultDispatcher-worker-1 @coroutine#1] Emitting 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[DefaultDispatcher-worker-1 @coroutine#1] 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[DefaultDispatcher-worker-1 @coroutine#1] Emitting 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[DefaultDispatcher-worker-1 @coroutine#1] 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[DefaultDispatcher-worker-1 @coroutine#1] Emitting 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[DefaultDispatcher-worker-1 @coroutine#1] 3</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="buffering"><strong>Buffering</strong><a aria-hidden="true" class="hash-link" href="#buffering" title="Direct link to heading">â€‹</a></h2><p>flowì˜ ì¼ë¶€ë¶„ì„ ë‹¤ë¥¸ ì½”ë£¨í‹´ì—ì„œ ë™ì‘í•˜ëŠ” ê²ƒì€ ì¥ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ë¹„ë™ê¸° ì‘ì—…ì—ì„œ ì‚¬ìš©í•˜ë©´ ì „ì²´ ì‹¤í–‰ì‹œê°„ì— ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤. ì˜ˆë¥¼ë“¤ì–´ flowì—ì„œ ê°’ ì „ë‹¬ì´ 100msë§ˆë‹¤ ë°œìƒí•˜ëŠ”ê³  collector ë‚´ë¶€ì˜ ì½”ë“œê°€ 300msë§Œí¼ ì§€ì—°ë˜ëŠ” ê²½ìš° ê³ ë ¤í•´ë³¼ë§Œ í•©ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val time = measureTimeMillis {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FlowPractice().simple().collect { value -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            delay(300) // pretend we are processing it for 300 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log(value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println(&quot;Collected in $time ms&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class FlowPractice {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fun simple(): Flow&lt;Int&gt; = flow {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (i in 1..3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            delay(100) // pretend we are asynchronously waiting 100 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        log(&quot;delay $i&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            emit(i) // emit next value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] delay 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] delay 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] delay 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Collected in 1259 ms</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>buffer</code> ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ë‹¬ ì½”ë“œì™€ collect ì½”ë“œë¥¼ ê°ì ë™ì‹œì— ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>â—Collect ì—°ì‚°ì„ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë‹¤ìŒ flow ë‚´ë¶€ ì½”ë“œê°€ ê³„ì† ë™ì‘í•©ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val time = measureTimeMillis {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FlowPractice().simple()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .buffer() // buffer emissions, don&#x27;t wait</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .collect { value -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                delay(300) // pretend we are processing it for 300 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                log(value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println(&quot;Collected in $time ms&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class FlowPractice {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fun simple(): Flow&lt;Int&gt; = flow {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (i in 1..3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            delay(100) // pretend we are asynchronously waiting 100 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log(&quot;delay $i&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            emit(i) // emit next value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#2] delay 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#2] delay 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#2] delay 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main @coroutine#1] 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Collected in 1089 ms</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>flowOn ì—°ì‚°ìì—ì„œ CoroutineDispatcherê°€ ë°”ë€” ë•Œ ë™ì‘í•˜ëŠ” ë²„í¼ë§ ë©”ì»¤ë‹ˆì¦˜ê³¼ ë™ì¼í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ buffering ì—°ì‚°ìëŠ” ì‹¤í–‰ contextê°€ ë³€ê²½ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p></div></div><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="conflation"><strong>Conflation</strong><a aria-hidden="true" class="hash-link" href="#conflation" title="Direct link to heading">â€‹</a></h3><p>ì—°ì‚°ì˜ ë¶€ë¶„ì ì¸ ê²°ê³¼ë¥¼ ì „ë‹¬í•˜ê±°ë‚˜ ì—°ì‚°ì˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ë¥¼ ì—°ì†ì ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ê²½ìš° ê° ê°’ì„ ì²˜ë¦¬í•  í•„ìš”ê°€ ì—†ì´ ìµœê·¼ ê°’ë§Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ <code>conflate</code> ì—°ì‚°ìëŠ” collectorì˜ ì²˜ë¦¬ê°€ ëŠë¦° ê²½ìš° ì¤‘ê°„ê°’ì„ ìƒëµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>â—ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ê°’ ì¤‘ ë‹¤ìŒ ê°’ì„ ì´ë¯¸ ë°›ì„ ìˆ˜ ìˆëŠ” ìƒíƒœì¸ ê²½ìš° ìƒëµ</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val time = measureTimeMillis {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simple()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .conflate() // conflate emissions, don&#x27;t process each one</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .collect { value -&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            delay(300) // pretend we are processing it for 300 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            println(value) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println(&quot;Collected in $time ms&quot;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[main] delay 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main] delay 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main] delay 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main] 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main] 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Collected in 760 ms</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="processing-the-latest-value"><strong>Processing the latest value</strong><a aria-hidden="true" class="hash-link" href="#processing-the-latest-value" title="Direct link to heading">â€‹</a></h3><p>Conflationì€ flowì™€ collector ë‘˜ ë‹¤ ëŠë¦´ ë•Œ ë¹ ë¥´ê²Œ í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì´ê²ƒì€ ì „ë‹¬í•˜ëŠ” ê°’ì„ ë²„ë¦¬ëŠ” ê²ƒ ì…ë‹ˆë‹¤. ëŠë¦° collector ì—°ì‚°ì„ ì·¨ì†Œí•˜ê³  ìƒˆë¡œìš´ ê°’ì„ ì „ë‹¬í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. <code>xxxLatest</code> ì—°ì‚° ëª¨ìŒì€  <code>xxx</code> ì—°ì‚°ì˜ ë¡œì§ì„ ìˆ˜í–‰ ì¤‘ ìƒˆ ê°’ì´ ë°œìƒí•˜ëŠ” ê²½ìš° ì¤‘ë‹¨ì‹œí‚µë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val time = measureTimeMillis {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simple()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .collectLatest { value -&gt; // cancel &amp; restart on the latest value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            println(&quot;Collecting $value&quot;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            delay(300) // pretend we are processing it for 300 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            println(&quot;Done $value&quot;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println(&quot;Collected in $time ms&quot;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[main] delay 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main] delay 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main] delay 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[main] 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Collected in 680 ms</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="composing-multiple-flows"><strong>Composing multiple flows</strong><a aria-hidden="true" class="hash-link" href="#composing-multiple-flows" title="Direct link to heading">â€‹</a></h2><p>ë‹¤ì¤‘ flowë¥¼ êµ¬ì„±í•˜ëŠ” ì—¬ëŸ¬ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.</p><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="zip"><strong>Zip</strong><a aria-hidden="true" class="hash-link" href="#zip" title="Direct link to heading">â€‹</a></h3><p>ì½”í‹€ë¦° ê¸°ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì‹œí€€ìŠ¤ì˜ zipê°™ì€ í™•ì¥ í•¨ìˆ˜ ì²˜ëŸ¼ flowì—ë„ ë‘ê°œì˜ flowë¥¼ ë³‘í•©í•˜ì—¬ ì „ë‹¬í•˜ëŠ” <code>zip</code> ì—°ì‚°ìê°€ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val nums = (1..3).asFlow() // numbers 1..3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val strs = flowOf(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;) // strings </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nums.zip(strs) { a, b -&gt; &quot;$a -&gt; $b&quot; } // compose a single string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .collect { println(it) } // collect and print</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">1 -&gt; one</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 -&gt; two</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 -&gt; three</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="combine"><strong>Combine</strong><a aria-hidden="true" class="hash-link" href="#combine" title="Direct link to heading">â€‹</a></h3><p>flowê°€ ë³€ìˆ˜ ë˜ëŠ” ì‘ì—…ì˜ ê°€ì¥ ìµœê·¼ ê°’ì„ ì „ë‹¬í•˜ëŠ” ê²½ìš° ê°’ì— ë”°ë¼ ê³„ì‚°ì„ ìˆ˜í–‰í•˜ê³  ì—…ìŠ¤íŠ¸ë¦¼ flowì—ì„œ ê°’ì„ ì „ë‹¬í•  ë•Œë§ˆë‹¤ ì´ë¥¼ ë‹¤ì‹œ ê³„ì‚°í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì—°ì‚°ì ì§‘í•©ì„ <code>combine</code>ì´ë¼ê³  í•©ë‹ˆë‹¤.</p><p>ì˜ˆë¥¼ ë“¤ì–´, ì´ì „ ì˜ˆì œì—ì„œ ìˆ«ìê°€ 300ms, ë¬¸ìì—´ì€ 400msë§ˆë‹¤ ì „ë‹¬ ëœë‹¤ë©´ zip ì—°ì‚°ìëŠ” ì´ì „ê³¼ ê°™ì€ ê²°ê³¼ë¥¼ 400msë§ˆë‹¤ ì¶œë ¥í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val nums = (1..3).asFlow().onEach { delay(300) } // numbers 1..3 every 300 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val strs = flowOf(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;).onEach { delay(400) } // strings every 400 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val startTime = System.currentTimeMillis() // remember the start time </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nums.zip(strs) { a, b -&gt; &quot;$a -&gt; $b&quot; } // compose a single string with &quot;zip&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .collect { value -&gt; // collect and print </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;$value at ${System.currentTimeMillis() - startTime} ms from start&quot;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">1 -&gt; one at 432 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 -&gt; two at 833 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 -&gt; three at 1243 ms from start</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ê·¸ëŸ¬ë‚˜ <code>combine</code> ì—°ì‚°ìëŠ” ë‘˜ ì¤‘ í•˜ë‚˜ì˜ ê°’ì´ ì „ë‹¬ë  ë•Œë§ˆë‹¤ ì¶œë ¥í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val nums = (1..3).asFlow().onEach { delay(300) } // numbers 1..3 every 300 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val strs = flowOf(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;).onEach { delay(400) } // strings every 400 ms          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val startTime = System.currentTimeMillis() // remember the start time </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nums.combine(strs) { a, b -&gt; &quot;$a -&gt; $b&quot; } // compose a single string with &quot;combine&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .collect { value -&gt; // collect and print </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;$value at ${System.currentTimeMillis() - startTime} ms from start&quot;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">1 -&gt; one at 452 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 -&gt; one at 651 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 -&gt; two at 854 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 -&gt; two at 952 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 -&gt; three at 1256 ms from start</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="flattening-flows"><strong>Flattening flows</strong><a aria-hidden="true" class="hash-link" href="#flattening-flows" title="Direct link to heading">â€‹</a></h2><p>flowëŠ” ìˆœì°¨ì ì¸ ê°’ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì œê³µí•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì „ë‹¬ë°›ëŠ” ê° ê°’ìœ¼ë¡œ ë‹¤ë¥¸ flowë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒ ë˜í•œ ë§¤ìš° ì‰½ìŠµë‹ˆë‹¤.</p><p>ì˜ˆë¥¼ ë“¤ì–´ 500ms ê°„ê²©ìœ¼ë¡œ ë‘ê°œì˜ ë¬¸ìì—´ì„ ë°˜í™˜í•˜ëŠ” flow í•¨ìˆ˜ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun requestFlow(i: Int): Flow&lt;String&gt; = flow {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emit(&quot;$i: First&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    delay(500) // wait 500 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emit(&quot;$i: Second&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ì—¬ê¸°ì„œ ë‹¤ìŒê³¼ ê°™ì´ 3ê°œì˜ ìˆ«ìë¥¼ ì „ë‹¬í•˜ëŠ” flowì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">(1..3).asFlow().map { requestFlow(it) }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ê·¸ëŸ° ë‹¤ìŒ flowì˜ flow ê°’(<code>Flow&lt;Flow&lt;String&gt;&gt;</code>)ì€ ì¶”ê°€ì ì¸ ì²˜ë¦¬ë¥¼ ìœ„í•œ ë‹¨ì¼ flowë¡œ í‰íƒ„í™” í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ Collectionsì™€ Sequencesì—ëŠ” flattenê³¼ flatMap ì—°ì‚°ìê°€ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜</p><p>flowëŠ” ë¹„ë™ê¸°ì  íŠ¹ì„±ìœ¼ë¡œ ì¸í•´ flowì˜ í‰íƒ„í™” ì—°ì‚°ìëŠ” ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.</p><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="flatmapconcat"><strong>flatMapConcat</strong><a aria-hidden="true" class="hash-link" href="#flatmapconcat" title="Direct link to heading">â€‹</a></h3><p>ë³‘í•© ë°©ì‹ì€ <code>flatMapConcat</code>ì´ë‚˜ <code>flattenConcat</code> ì—°ì‚°ìë¡œ êµ¬í˜„í•©ë‹ˆë‹¤. ì´ê²ƒì€ ì‹œí€€ìŠ¤ ì—°ì‚°ìì— ê°€ì¥ ë¹„ìŠ·í•©ë‹ˆë‹¤. ì´ ë•Œ flowì˜ ê° ê°’ ì „ë‹¬ì€ ë‚´ë¶€ flowì˜ collectê°€ ëë‚ ë•Œê¹Œì§€ ëŒ€ê¸°í•œ í›„ì— ì‹¤í–‰ë©ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val startTime = System.currentTimeMillis() // remember the start time </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1..3).asFlow().onEach { delay(100) } // a number every 100 ms </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .flatMapConcat { requestFlow(it) }                                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .collect { value -&gt; // collect and print </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;$value at ${System.currentTimeMillis() - startTime} ms from start&quot;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>flatMapConcat</code>ì˜ ìˆœì°¨ì ì¸ íŠ¹ì„±ì€ ì¶œë ¥ê³¼ ê°™ìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">1: First at 121 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1: Second at 622 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: First at 727 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: Second at 1227 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3: First at 1328 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3: Second at 1829 ms from start</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="flatmapmerge"><strong>flatMapMerge</strong><a aria-hidden="true" class="hash-link" href="#flatmapmerge" title="Direct link to heading">â€‹</a></h3><p>ë‹¤ë¥¸ í‰íƒ„í™” ë°©ì‹ì€ ì „ë‹¬ë˜ëŠ” ëª¨ë“  flowë¥¼ ë™ì‹œì— collectí•˜ê³  ë‹¨ì¼ flowë¡œ ë³‘í•©í•˜ì—¬ ê°€ëŠ¥í•œ í•œ ë¹ ë¥´ê²Œ ì „ë‹¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ê²ƒì€ <code>flatMapMerge</code>ë‚˜ <code>flattenMerge</code> ì—°ì‚°ìë¡œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‘ ì—°ì‚°ì ëª¨ë‘ collect ë˜ëŠ” flowì˜ ìˆ˜ë¥¼ ì œí•œí•˜ëŠ” ì¸ìë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œëŠ” DEFAULT_CONCURRENCYì™€(16) ê°™ìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val startTime = System.currentTimeMillis() // remember the start time </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1..3).asFlow().onEach { delay(100) } // a number every 100 ms </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .flatMapMerge { requestFlow(it) }                                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .collect { value -&gt; // collect and print </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;$value at ${System.currentTimeMillis() - startTime} ms from start&quot;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">1: First at 136 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: First at 231 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3: First at 333 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1: Second at 639 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: Second at 732 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3: Second at 833 ms from start</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p><code>flatMapMerge</code>ëŠ” ì½”ë“œ ë¸”ë¡ì„ ìˆœì°¨ì ìœ¼ë¡œ í˜¸ì¶œí•˜ì§€ë§Œ flowì˜ ê²°ê³¼ë¥¼ ë™ì‹œì— ìˆ˜ì§‘í•©ë‹ˆë‹¤. ì´ëŠ” ìˆœì°¨ì ìœ¼ë¡œ <code>map { requestFlow(it) }</code>ë¥¼ ë¨¼ì € ìˆ˜í–‰í•œ ë‹¤ìŒ <code>flattenMerge</code>ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ ë™ì¼í•©ë‹ˆë‹¤.</p></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">(1..3).asFlow().onEach { delay(100) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .map { FlowPractice().requestFlow(it)  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .flattenMerge()</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="flatmaplatest"><strong>flatMapLatest</strong><a aria-hidden="true" class="hash-link" href="#flatmaplatest" title="Direct link to heading">â€‹</a></h3><p>Processing the latest Value ë¬¸ë‹¨ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” collectLatest ì—°ì‚°ìì™€ ë¹„ìŠ·í•œ ë°©ë²•ìœ¼ë¡œì„œ, ìƒˆë¡œìš´ flowê°€ ì „ë‹¬ë˜ë©´ ì´ì „ flowëŠ” ì¤‘ë‹¨ë˜ëŠ” í‰íƒ„í™” ë°©ì‹ì…ë‹ˆë‹¤. <code>flatMapLatest</code> ì—°ì‚°ìë¡œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val startTime = System.currentTimeMillis() // remember the start time </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1..3).asFlow().onEach { delay(100) } // a number every 100 ms </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .flatMapLatest { requestFlow(it) }                                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .collect { value -&gt; // collect and print </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;$value at ${System.currentTimeMillis() - startTime} ms from start&quot;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">1: First at 142 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: First at 322 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3: First at 425 ms from start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3: Second at 931 ms from start</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p><code>flatMapLatest</code>ëŠ” ìƒˆ ê°’ì—ì„œ ê¸°ì¡´ ì½”ë“œë¥¼ ì·¨ì†Œí•©ë‹ˆë‹¤. <code>requestFlow</code> ê°€ ë¹ ë¥´ê²Œ ë™ì‘í•˜ê±°ë‚˜ ì¤‘ë‹¨ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê±°ë‚˜ ì·¨ì†Œí•  ìˆ˜ ì—†ëŠ” ê²½ìš° ë‹¤ë¥¸ ì˜ˆì œì™€ ê°™ì€ ë™ì‘ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ <code>delay</code>ì™€ ê°™ì€ ì¼ì‹œ ì¤‘ë‹¨ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ ì°¨ì´ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="flow-exceptions"><strong>Flow exceptions</strong><a aria-hidden="true" class="hash-link" href="#flow-exceptions" title="Direct link to heading">â€‹</a></h2><p>FlowëŠ” ê°’ì„ ì „ë‹¬í•  ë•Œë‚˜ ì½”ë“œ ë‚´ë¶€ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ë•Œ ì™„ë²½íˆ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª‡ëª‡ ì˜ˆì™¸ì²˜ë¦¬ ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.</p><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="collector-try-and-catch"><strong>Collector try and catch</strong><a aria-hidden="true" class="hash-link" href="#collector-try-and-catch" title="Direct link to heading">â€‹</a></h3><p>kotlinì˜ <code>try-catch</code> êµ¬ë¬¸ìœ¼ë¡œ ì˜ˆì™¸ì²˜ë¦¬ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun simple(): Flow&lt;Int&gt; = flow {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (i in 1..3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;Emitting $i&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit(i) // emit next value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        simple().collect { value -&gt;         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            println(value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            check(value &lt;= 1) { &quot;Collected $value&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } catch (e: Throwable) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;Caught $e&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Emitting 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Emitting 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Caught java.lang.IllegalStateException: Collected 2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ìœ„ ì½”ë“œëŠ” collect ë‹¨ë§ ì—°ì‚°ì ë‚´ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ì— ëŒ€í•´ ì²˜ë¦¬ë˜ê³  ì¶”ê°€ì ì¸ ê°’ ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="everything-is-caught"><strong>Everything is caught</strong><a aria-hidden="true" class="hash-link" href="#everything-is-caught" title="Direct link to heading">â€‹</a></h3><p>ì´ì „ ì˜ˆì œì—ì„œëŠ” ì „ë‹¬ìë‚˜ ì¤‘ê°„ ì—°ì‚°ì, ë‹¨ë§ ì—°ì‚°ìì—ì„œ ë°œìƒí•˜ëŠ” ëª¨ë“  ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì „ë‹¬ ê°’ì´ ë¬¸ìì—´ì— ë§¤í•‘ë˜ë„ë¡ ì½”ë“œë¥¼ ë³€ê²½í•´ë„ ê·¸ ì½”ë“œëŠ” ì˜ˆì™¸ë¥¼ ë°œìƒí•©ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun simple(): Flow&lt;String&gt; = </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flow {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (i in 1..3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            println(&quot;Emitting $i&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            emit(i) // emit next value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .map { value -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        check(value &lt;= 1) { &quot;Crashed on $value&quot; }                 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;string $value&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        simple().collect { value -&gt; println(value) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } catch (e: Throwable) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;Caught $e&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">string 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Emitting 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Caught java.lang.IllegalStateException: Crashed on 2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="exception-transparency"><strong>Exception transparency</strong><a aria-hidden="true" class="hash-link" href="#exception-transparency" title="Direct link to heading">â€‹</a></h2><p>flowëŠ” ì˜ˆì™¸ì— ëŒ€í•´ íˆ¬ëª…í•´ì•¼ í•˜ë©° try/catch ë‚´ë¶€ì—ì„œ <code>flow { ... }</code> ë¹Œë”ë¥¼ í†µí•´ ê°’ì„ ì „ë‹¬í•˜ëŠ” ê²ƒì€ ì˜ˆì™¸ íˆ¬ëª…ì„±ì— ìœ„ë°°ë©ë‹ˆë‹¤. ì˜ˆí‡´ì˜ íˆ¬ëª…ì„±ì€ ì´ì „ ì˜ˆì œì˜ try/catch ì²˜ëŸ¼ collectorì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ í•­ìƒ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.</p><p>ì „ë‹¬ìëŠ” <code>catch</code> ì—°ì‚°ìë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ ì˜ˆì™¸ íˆ¬ëª…ì„±ì„ ì œê³µí•˜ê³  ì˜ˆì™¸ì²˜ë¦¬ì˜ ìº¡ìŠí™”ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. catch ì—°ì‚°ìì˜ êµ¬í˜„ ë¶€ë¶„ì€ ì˜ˆì™¸ë¥¼ ë¶„ì„í•  ìˆ˜ ìˆê³  ì˜ˆì™¸ì— ì¢…ë¥˜ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><ul><li><code>throw</code>ë¥¼ ì´ìš©í•˜ì—¬ ë‹¤ì‹œ ì˜ˆì™¸ë¥¼ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li><li><code>catch</code>ì˜ êµ¬í˜„ ë¶€ë¶„ì—ì„œë„ emitì„ ì´ìš©í•˜ì—¬ ê°’ì„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li><li>ì˜ˆì™¸ëŠ” ë¬´ì‹œí•˜ê±°ë‚˜ ë¡œê¹…í•˜ê±°ë‚˜ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li></ul><p>ë‹¤ìŒ ì˜ˆì œì²˜ëŸ¼ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ ë¬¸ìì—´ì„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">simple()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .catch { e -&gt; emit(&quot;Caught $e&quot;) } // emit on exception</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .collect { value -&gt; println(value) }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="transparent-catch"><strong>Transparent catch</strong><a aria-hidden="true" class="hash-link" href="#transparent-catch" title="Direct link to heading">â€‹</a></h3><p><code>catch</code> ì¤‘ê°„ ì—°ì‚°ìëŠ” ì˜ˆì™¸ íˆ¬ëª…ì„±ì„ ì œê³µí•˜ê³  ì—…ìŠ¤íŠ¸ë¦¼ì˜ ì˜ˆì™¸ë§Œ ì¡ìŠµë‹ˆë‹¤. catchë³´ë‹¤ ë¨¼ì € ì„ ì–¸ëœ ì—°ì‚°ìë“¤ì— ëŒ€í•œ ì˜ˆì™¸ë§Œ ì¡ìœ¼ë©° ì´í›„ ì„ ì–¸ëœ ê²½ìš° ì¡ì§€ ì•ŠìŠµë‹ˆë‹¤. ë§Œì•½ catch ì•„ë˜ì— ì„ ì–¸ëœ collectì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ escapeë©ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun simple(): Flow&lt;Int&gt; = flow {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (i in 1..3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;Emitting $i&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit(i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simple()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .catch { e -&gt; println(&quot;Caught $e&quot;) } // does not catch downstream exceptions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .collect { value -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            check(value &lt;= 1) { &quot;Collected $value&quot; }                 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            println(value) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Emitting 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Emitting 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exception in thread &quot;main&quot; java.lang.IllegalStateException: Collected 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> at FileKt$main$1$invokeSuspend$$inlined$collect$1.emit (Collect.kt:135) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> at kotlinx.coroutines.flow.FlowKt__ErrorsKt$catchImpl$$inlined$collect$1.emit (Collect.kt:136) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> at kotlinx.coroutines.flow.internal.SafeCollectorKt$emitFun$1.invoke (SafeCollector.kt:15)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="catching-declaratively"><strong>Catching declaratively</strong><a aria-hidden="true" class="hash-link" href="#catching-declaratively" title="Direct link to heading">â€‹</a></h3><p>catch ì—°ì‚°ìë¡œ collect ì˜ì—­ì„ í¬í•¨í•œ ëª¨ë“  ì˜¤ë¥˜ë¥¼ ì œì–´í•˜ê³  ì‹¶ì€ ê²½ìš° <code>onEach</code>ë¥¼ catch ì—°ì‚°ì ì´ì „ì— êµ¬í˜„í•˜ì—¬ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ Flow Collectionì€ êµ¬í˜„ ì—†ì´ <code>collect()</code>ë§Œì„ í˜¸ì¶œí•˜ì—¬ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">simple()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .onEach { value -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        check(value &lt;= 1) { &quot;Collected $value&quot; }                 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(value) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .catch { e -&gt; println(&quot;Caught $e&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .collect()</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Emitting 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Emitting 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Caught java.lang.IllegalStateException: Collected 2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="flow-completion"><strong>Flow completion</strong><a aria-hidden="true" class="hash-link" href="#flow-completion" title="Direct link to heading">â€‹</a></h2><p>Flowì˜ ìˆ˜ì§‘ì´ ì¼ë°˜ì ìœ¼ë¡œë‚˜ ì˜ˆì™¸ ë°œìƒìœ¼ë¡œ ì™„ë£Œë˜ë©´ ì¶”ê°€ì ì¸ ì²˜ë¦¬ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¯¸ ì•Œì•„ì±˜ì„ ìˆ˜ ìˆê² ì§€ë§Œ <code>ëª…ë ¹í˜•</code> í˜¹ì€ <code>ì„ ì–¸í˜•</code>ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="imperative-finally-block"><strong>Imperative finally block</strong><a aria-hidden="true" class="hash-link" href="#imperative-finally-block" title="Direct link to heading">â€‹</a></h3><p><code>try/catch</code>ì˜ <code>finally</code> ë¸”ë¡ì„ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun simple(): Flow&lt;Int&gt; = (1..3).asFlow()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        simple().collect { value -&gt; println(value) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } finally {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;Done&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Done</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="declarative-handling"><strong>Declarative handling</strong><a aria-hidden="true" class="hash-link" href="#declarative-handling" title="Direct link to heading">â€‹</a></h3><p>ì„ ì–¸í˜•ìœ¼ë¡œ ì ‘ê·¼í•˜ë©´ flowì—ëŠ” ìˆ˜ì§‘ì´ ì™„ë£Œë˜ë©´ í˜¸ì¶œ ë˜ëŠ” <code>onCompletion</code> ì¤‘ê°„ ì—°ì‚°ìê°€ ìˆìŠµë‹ˆë‹¤.</p><p><code>onCompletion</code> ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•˜ë©´ ì´ì „ ì˜ˆì œì™€ ê°™ì€ ê²°ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">simple()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .onCompletion { println(&quot;Done&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .collect { value -&gt; println(value) }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>onCompletion</code>ì˜ ì£¼ìš”í•œ ì´ì ì€ <code>Throwable</code> ì¸ìì˜ nullable ìƒíƒœë¥¼ í†µí•´ ì •ìƒ ì™„ë£Œì¸ì§€ ì˜¤ë¥˜ì— ì˜í•œ ì™„ë£Œì¸ì§€ íŒŒì•…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun simple(): Flow&lt;Int&gt; = flow {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emit(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    throw RuntimeException()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simple()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .onCompletion { cause -&gt; if (cause != null) println(&quot;Flow completed exceptionally&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .catch { cause -&gt; println(&quot;Caught exception&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .collect { value -&gt; println(value) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Flow completed exceptionally</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Caught exception</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>onCompletion</code> ì—°ì‚°ìëŠ” <code>catch</code> ì—°ì‚°ìì™€ ë‹¬ë¦¬ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìœ„ì˜ ì˜ˆì œ ì½”ë“œì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´ ì˜ˆì™¸ëŠ” ì—¬ì „íˆ ë‹¤ìš´ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ íë¦…ë‹ˆë‹¤. <code>catch</code>ì—ì„œ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ê³  <code>onCompletion</code>ìœ¼ë¡œ ê±°ìŠ¬ëŸ¬ ì˜¬ë¼ê°€ ì „ë‹¬í•©ë‹ˆë‹¤.</p><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="successful-completion"><strong>Successful completion</strong><a aria-hidden="true" class="hash-link" href="#successful-completion" title="Direct link to heading">â€‹</a></h3><p>catchì™€ onCompletionì˜ ë˜ë‹¤ë¥¸ ì°¨ì´ì ì€ ëª¨ë“  ì˜ˆì™¸ë¥¼ ì „ë‹¬ ë°›ì„ ìˆ˜ ìˆê³ , flowì˜ ì—…ìŠ¤íŠ¸ë¦¼ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œëœ ê²½ìš°ì—ëŠ” null ì¸ìë¥¼ ì „ë‹¬ë°›ìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun simple(): Flow&lt;Int&gt; = (1..3).asFlow()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simple()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .onCompletion { cause -&gt; println(&quot;Flow completed with $cause&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .collect { value -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            check(value &lt;= 1) { &quot;Collected $value&quot; }                 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            println(value) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ë‹¤ìš´ìŠ¤íŠ¸ë¦¼ ì˜ˆì™¸ë¡œ ì¸í•´ flowê°€ ì¤‘ë‹¨ë˜ì—ˆê¸° ë•Œë¬¸ì— ì˜ˆì™¸ê°€ nullì´ ì•„ë‹˜ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Flow completed with java.lang.IllegalStateException: Collected 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exception in thread &quot;main&quot; java.lang.IllegalStateException: Collected 2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="imperative-versus-declarative"><strong>Imperative versus declarative</strong><a aria-hidden="true" class="hash-link" href="#imperative-versus-declarative" title="Direct link to heading">â€‹</a></h2><p>ì§€ê¸ˆê¹Œì§€ flowë¥¼ ìˆ˜ì§‘í•˜ëŠ” ë°©ë²•ê³¼ ì™„ë£Œì™€ ì˜ˆì™¸ì— ëŒ€í•´ ì„ ì–¸í˜•, ëª…ë ¹í˜• ë‘ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ìì—°ìŠ¤ëŸ½ê²Œ ì–´ëŠê±¸ ìš°ì„ ì ìœ¼ë¡œ, ì™œ ì¨ì•¼í•˜ëŠ”ì§€ ê¶ê¸ˆì¦ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³µì‹ì ìœ¼ë¡œëŠ” ë‘ ì˜µì…˜ ëª¨ë‘ ìœ íš¨í•˜ë©° ìì‹ ì˜ ê¸°ë³¸ ì„¤ì •ê³¼ ì½”ë“œ ìŠ¤íƒ€ì¼ì— ë”°ë¼ ì„ íƒí•  ìˆ˜ ìˆë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.</p><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="launching-flow"><strong>Launching flow</strong><a aria-hidden="true" class="hash-link" href="#launching-flow" title="Direct link to heading">â€‹</a></h2><p>ì¼ë¶€ ì†ŒìŠ¤ì˜ ì •ë³´ë¥¼ flow ë¹„ë™ê¸° ì´ë²¤íŠ¸ë¡œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ ì™¸ì—ë„ addEventListenerë¥¼ ì´ìš©í•˜ì—¬ ì½”ë“œì˜ ì¼ë¶€ì— ëŒ€í•´ ì´ë²¤íŠ¸ ì²˜ë¦¬ë¥¼ í•˜ê±°ë‚˜ ë” ë‚˜ì•„ê°€ ì½”ë£¨í‹´ì„ ì²˜ë¦¬í•  í•„ìš”ë„ ìˆìŠµë‹ˆë‹¤. onEach ì—°ì‚°ìëŠ” ì´ ì—­í• ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ onEachëŠ” ì¤‘ê°„ ì—°ì‚°ìì—¬ì„œ ì‹¤í–‰ì´ ë¶ˆê°€ëŠ¥í•˜ê³  ë‹¨ë§ ì—°ì‚°ìë„ í•„ìš”í•©ë‹ˆë‹¤.</p><p>oneEach ë‹¤ìŒì— collect ë‹¨ë§ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•œ í›„ì— ì½”ë“œëŠ” flowì— ê°’ì´ ì „ë‹¬ ë  ë•Œê¹Œì§€ ëŒ€ê¸°í•©ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Imitate a flow of events</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun events(): Flow&lt;Int&gt; = (1..3).asFlow().onEach { delay(100) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    events()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .onEach { event -&gt; println(&quot;Event: $event&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .collect() // &lt;--- Collecting the flow waits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println(&quot;Done&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Event: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Event: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Event: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Done</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ì´ ê²½ìš° <code>launchIn</code> í„°ë¯¸ë„ ì—°ì‚°ìê°€ ìœ ìš©í•©ë‹ˆë‹¤. <code>collect</code>ë¥¼ <code>launchIn</code>ìœ¼ë¡œ ë³€ê²½í•˜ë©´ ë³„ë„ì˜ ì½”ë£¨í‹´ì—ì„œ flow collectionì„ ì‹œì‘í•˜ì—¬ ì¦‰ì‹œ ì¶”ê°€ ì½”ë“œê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    events()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .onEach { event -&gt; println(&quot;Event: $event&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .launchIn(this) // &lt;--- Launching the flow in a separate coroutine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println(&quot;Done&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Event: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Event: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Event: 3</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>launchIn</code>ì— ëŒ€í•œ í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜ëŠ” ì½”ë£¨í‹´ì´ ì‹œì‘ë˜ëŠ” <code>CoroutineScope</code>ë¥¼ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. ìœ„ì˜ ì˜ˆì—ì„œ scopeëŠ” <code>runBlocking</code> ì½”ë£¨í‹´ ë¹Œë”ì—ì„œ ê°€ì ¸ì˜¤ë¯€ë¡œ flowê°€ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ì´ <code>runBlocking</code> scopeëŠ” ìì‹ ì½”ë£¨í‹´ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ê³  main í•¨ìˆ˜ê°€ ì¢…ë£Œí•˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.</p><p>ì‹¤ì œ ì‘ìš© í”„ë¡œê·¸ë¨ì—ì„œ scopeëŠ” ìˆ˜ëª…ì´ ì œí•œëœ ì—”í„°í‹°ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤. ì´ ì—”í„°í‹°ì˜ ìˆ˜ëª…ì´ ì¢…ë£Œë˜ëŠ” ì¦‰ì‹œ í•´ë‹¹ scopeê°€ ì·¨ì†Œë˜ê³  í•´ë‹¹ flowì˜ collectionì´ ì·¨ì†Œë©ë‹ˆë‹¤. ì´ëŸ° ì‹ìœ¼ë¡œ <code>oneEach { ... }.launchIn(scope)</code> ëŠ”  <code>addEventListener</code>ì²˜ëŸ¼ ì‘ë™í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  <code>removeEventListener</code> í•¨ìˆ˜ ëŒ€ì‹ ì— ì·¨ì†Œì™€ êµ¬ì¡°í™”ëœ ë™ì‹œì„±ìœ¼ë¡œ ì™„ë£Œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ê·¸ë¦¬ê³  <code>launchIn</code>ì€ ëª¨ë“  Scopeë¥¼ <code>join</code>í•˜ê±°ë‚˜ flow ì½”ë£¨í‹´ì„ ì·¨ì†Œí•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” <code>Job</code>ì„ ë°˜í™˜í•©ë‹ˆë‹¤.</p><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="flow-cancellation-checks"><strong>Flow cancellation checks</strong><a aria-hidden="true" class="hash-link" href="#flow-cancellation-checks" title="Direct link to heading">â€‹</a></h3><p>Flow BuilderëŠ” ì „ë‹¬ëœ ê°’ì— ë”°ë¼ ì·¨ì†Œí•˜ê¸° ìœ„í•´ <code>sureActive</code> ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <code>flow { ... }</code> ì—ì„œ ê°’ì´ ì „ë‹¬ë˜ëŠ” ì¤‘ì—ë„ ë£¨í”„ë¥¼ ì·¨ì†Œí•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun foo(): Flow&lt;Int&gt; = flow { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (i in 1..5) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(&quot;Emitting $i&quot;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit(i) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    foo().collect { value -&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (value == 3) cancel()  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Emitting 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Emitting 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Emitting 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Emitting 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exception in thread &quot;main&quot; kotlinx.coroutines.JobCancellationException: BlockingCoroutine was cancelled; job=&quot;coroutine#1&quot;:BlockingCoroutine{Cancelled}@6d7b4f4c</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ê·¸ëŸ¬ë‚˜ ëŒ€ë¶€ë¶„ì˜ ë‹¤ë¥¸ flow ì—°ì‚°ìëŠ” ì„±ëŠ¥ìƒì˜ ì´ìœ ë¡œ ì·¨ì†Œë¥¼ ìœ„í•œ ìì²´ì ì¸ ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ <code>IntRange.asFlow</code> í™•ì¥ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë™ì¼í•œ ë£¨í”„ë¥¼ ì‘ì„±í•˜ë©´ ì¤‘ë‹¨ í•¨ìˆ˜ê°€ ì—†ê¸° ë–„ë¬¸ì— ì·¨ì†Œì— ëŒ€í•œ ê²€ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (1..5).asFlow().collect { value -&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (value == 3) cancel()  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exception in thread &quot;main&quot; kotlinx.coroutines.JobCancellationException: BlockingCoroutine was cancelled; job=&quot;coroutine#1&quot;:BlockingCoroutine{Cancelled}@3327bd23</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="making-busy-flow-cancellable"><strong>Making busy flow cancellable</strong><a aria-hidden="true" class="hash-link" href="#making-busy-flow-cancellable" title="Direct link to heading">â€‹</a></h3><p>ì´ ê²½ìš° ì·¨ì†Œë¥¼ ê²€ì‚¬í•˜ë„ë¡ ëª…ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  <code>.onEach { currentCoroutineContext().ensureActive() }</code> ë¥¼ êµ¬í˜„í•˜ì—¬ ì¶”ê°€í•  ìˆ˜ ìˆëŠ”ë°, <code>cancellable</code> ì—°ì‚°ìë¥¼ ì´ìš©í•˜ì—¬ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fun main() = runBlocking&lt;Unit&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (1..5).asFlow().cancellable().collect { value -&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (value == 3) cancel()  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println(value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-kotlin"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exception in thread &quot;main&quot; kotlinx.coroutines.JobCancellationException: BlockingCoroutine was cancelled; job=&quot;coroutine#1&quot;:BlockingCoroutine{Cancelled}@5ec0a365</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><br><h2 class="anchor anchorWithStickyNavbar_31ik" id="flow-and-reactive-streams"><strong>Flow and Reactive Streams</strong><a aria-hidden="true" class="hash-link" href="#flow-and-reactive-streams" title="Direct link to heading">â€‹</a></h2><p>RxJavaë‚˜ Reactorì™€ ê°™ì€ Reactive Frameworkë‚˜ Reactive Streams ì²˜ëŸ¼ Flow ì—­ì‹œ ë§¤ìš° ì¹œìˆ™í•˜ê²Œ ë””ìì¸ ë˜ì–´ìˆìŠµë‹ˆë‹¤.</p><p>ì‹¤ì œë¡œ ê·¸ ë””ìì¸ì€ Reactive Streamsì™€ ë‹¤ì–‘í•œ êµ¬í˜„ì—ì„œ ì˜ê°ì„ ë°›ì•˜ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ Flowì˜ ì£¼ìš” ëª©í‘œëŠ” ê°€ëŠ¥í•œ í•œ ë‹¨ìˆœí•œ ë””ìì¸ê³¼ Kotlin ë° ì„œìŠ¤íœì…˜ ì¹œí™”ì ì´ë©° ë™ì‹œì„±ì„ ì§€ì›í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ëŠ” ê²ƒì€ ë¦¬ì•¡í‹°ë¸Œ ê°œì²™ìë“¤ê³¼ ê·¸ë“¤ì˜ ì—„ì²­ë‚œ ë…¸ë ¥ ì—†ì´ëŠ” ë¶ˆê°€ëŠ¥í–ˆì„ ê²ƒì…ë‹ˆë‹¤. <a href="https://medium.com/@elizarov/reactive-streams-and-kotlin-flows-bfd12772cda4" target="_blank" rel="noopener noreferrer">Reactive Streams and Kotlin Flows</a>ì—ì„œ ì „ì²´ ìŠ¤í† ë¦¬ë¥¼ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ê°œë…ì ìœ¼ë¡œëŠ” ë‹¤ë¥´ì§€ë§Œ FlowëŠ” ë¦¬ì•¡í‹°ë¸Œ ìŠ¤íŠ¸ë¦¼ì´ë©° ë‹¤ë¥¸ Reactive ëª¨ë“ˆì˜ ê¸°ëŠ¥ìœ¼ë¡œ ë³€í™˜í•˜ê±°ë‚˜ ë°˜ëŒ€ë¡œ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë³€í™˜ê¸°ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ <code>kotlinx.coroutines</code>ì— ì˜í•´ ì œê³µë˜ë©° ë‹¤ìŒReactive ëª¨ë“ˆì„ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (Reactive Streamsì€ <code>kotlinx-coroutines-reactive</code>, Project ReactorëŠ” <code>kotlinx-coroutines-reactor</code> , RxJava2/RxJava3ëŠ” <code>kotlinx-coroutines-rx2/kotlinx-coroutines-rx3</code> ). í†µí•© ëª¨ë“ˆì—ëŠ” Flowì—ì„œì˜ ë³€í™˜ì´ë‚˜ Reactorì˜ ì»¨í…ìŠ¤íŠ¸ í†µí•© ê·¸ë¦¬ê³  ë‹¤ì–‘í•œ Reactive Entityì™€ ì„œìŠ¤íœì…˜ ì¹œí™”ì ì¸ ì‘ì—… ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.</p></div></article><div class="comment-container"></div><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#representing-multiple-values" class="table-of-contents__link toc-highlight"><strong>Representing multiple values</strong></a><ul><li><a href="#sequences" class="table-of-contents__link toc-highlight"><strong>Sequences</strong></a></li><li><a href="#suspending-functions" class="table-of-contents__link toc-highlight"><strong>Suspending functions</strong></a></li><li><a href="#flows" class="table-of-contents__link toc-highlight"><strong>Flows</strong></a></li></ul></li><li><a href="#flow-are-cold" class="table-of-contents__link toc-highlight"><strong>Flow are cold</strong></a></li><li><a href="#flow-cancellation-basics" class="table-of-contents__link toc-highlight"><strong>Flow cancellation basics</strong></a></li><li><a href="#flow-builders" class="table-of-contents__link toc-highlight"><strong>Flow builders</strong></a></li><li><a href="#intermediate-flow-operators" class="table-of-contents__link toc-highlight"><strong>Intermediate flow operators</strong></a></li><li><a href="#transform-operator" class="table-of-contents__link toc-highlight"><strong>Transform operator</strong></a></li><li><a href="#size-limiting-operators" class="table-of-contents__link toc-highlight"><strong>Size-limiting operators</strong></a></li><li><a href="#terminal-flow-operators" class="table-of-contents__link toc-highlight"><strong>Terminal flow operators</strong></a></li><li><a href="#flows-are-sequential" class="table-of-contents__link toc-highlight"><strong>Flows are sequential</strong></a></li><li><a href="#flow-context" class="table-of-contents__link toc-highlight"><strong>Flow context</strong></a><ul><li><a href="#wrong-emission-withcontext" class="table-of-contents__link toc-highlight"><strong>Wrong emission withContext</strong></a></li><li><a href="#flowon-operator" class="table-of-contents__link toc-highlight"><strong>flowOn operator</strong></a></li></ul></li><li><a href="#buffering" class="table-of-contents__link toc-highlight"><strong>Buffering</strong></a><ul><li><a href="#conflation" class="table-of-contents__link toc-highlight"><strong>Conflation</strong></a></li><li><a href="#processing-the-latest-value" class="table-of-contents__link toc-highlight"><strong>Processing the latest value</strong></a></li></ul></li><li><a href="#composing-multiple-flows" class="table-of-contents__link toc-highlight"><strong>Composing multiple flows</strong></a><ul><li><a href="#zip" class="table-of-contents__link toc-highlight"><strong>Zip</strong></a></li><li><a href="#combine" class="table-of-contents__link toc-highlight"><strong>Combine</strong></a></li></ul></li><li><a href="#flattening-flows" class="table-of-contents__link toc-highlight"><strong>Flattening flows</strong></a><ul><li><a href="#flatmapconcat" class="table-of-contents__link toc-highlight"><strong>flatMapConcat</strong></a></li><li><a href="#flatmapmerge" class="table-of-contents__link toc-highlight"><strong>flatMapMerge</strong></a></li><li><a href="#flatmaplatest" class="table-of-contents__link toc-highlight"><strong>flatMapLatest</strong></a></li></ul></li><li><a href="#flow-exceptions" class="table-of-contents__link toc-highlight"><strong>Flow exceptions</strong></a><ul><li><a href="#collector-try-and-catch" class="table-of-contents__link toc-highlight"><strong>Collector try and catch</strong></a></li><li><a href="#everything-is-caught" class="table-of-contents__link toc-highlight"><strong>Everything is caught</strong></a></li></ul></li><li><a href="#exception-transparency" class="table-of-contents__link toc-highlight"><strong>Exception transparency</strong></a><ul><li><a href="#transparent-catch" class="table-of-contents__link toc-highlight"><strong>Transparent catch</strong></a></li><li><a href="#catching-declaratively" class="table-of-contents__link toc-highlight"><strong>Catching declaratively</strong></a></li></ul></li><li><a href="#flow-completion" class="table-of-contents__link toc-highlight"><strong>Flow completion</strong></a><ul><li><a href="#imperative-finally-block" class="table-of-contents__link toc-highlight"><strong>Imperative finally block</strong></a></li><li><a href="#declarative-handling" class="table-of-contents__link toc-highlight"><strong>Declarative handling</strong></a></li><li><a href="#successful-completion" class="table-of-contents__link toc-highlight"><strong>Successful completion</strong></a></li></ul></li><li><a href="#imperative-versus-declarative" class="table-of-contents__link toc-highlight"><strong>Imperative versus declarative</strong></a></li><li><a href="#launching-flow" class="table-of-contents__link toc-highlight"><strong>Launching flow</strong></a><ul><li><a href="#flow-cancellation-checks" class="table-of-contents__link toc-highlight"><strong>Flow cancellation checks</strong></a></li><li><a href="#making-busy-flow-cancellable" class="table-of-contents__link toc-highlight"><strong>Making busy flow cancellable</strong></a></li></ul></li><li><a href="#flow-and-reactive-streams" class="table-of-contents__link toc-highlight"><strong>Flow and Reactive Streams</strong></a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/hscodev" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 COV. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.4ca9dad8.js"></script>
<script src="/assets/js/main.62572ae6.js"></script>
</body>
</html>